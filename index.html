<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=  , initial-scale=1.0">
    <title>Typing-wrbsite</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Josefin+Sans&display=swap" rel="stylesheet">
</head>

<body>
    <div class="mainDiv">
        <div class="centerDiv">
            <h1>____Welcome To My Typing Speed website____</h1>
            <h2 id="msg"> </h2>
            <br>
            <textarea id="mywords" cols="100" rows="10" placeholder="Hello , nice to meet you"></textarea>
            <br>
            <button id="btn" class="mainbtn">Start</button>

        </div>

    </div>

    <script>

        const setOfWords = [
            "Hello friends my name is hariom mishra and i am a front-end web developer.",
            "I hope you are having fun this is a simple website you can make.",
            "In this website i have used HTML , CSS , JS.",
            "i hope you like this and your typing skills are improving.",
            "Never underestimate yourself because what you can do no one else can do.",
            "You are so lucky if you are sad and someone is making an effort to make you smile.",
            "99% of the time,we forgive people because we still want them in our lives.",
            "My youtube channel is 'evilnights gaming' if you like the website.",
            "Then plz subscribe my channel thanku so much...."
        ];

        const msg = document.getElementById('msg');
        const typeWords = document.getElementById('mywords');
        const btn = document.getElementById('btn');
        let startTime, endTime;

        const playGame = () => {
            let randomNumber = Math.floor(Math.random() * setOfWords.length);
            msg.innerText = setOfWords[randomNumber];
            let date = new Date();
            startTime = date.getTime();
            btn.innerText = "Done";

        }


        const endPlay = () => {
            let date = new Date();
            endTime = date.getTime();
            let totalTime = ((endTime - startTime)/ 1000);
            console.log(totalTime);

            let totatStr = typeWords.value;
            let wordCount = wordCounter(totatStr);

            let speed = Math.round((wordCount / totalTime) * 60);

            let finalMsg = " You typed total at " +speed+ " words per minutes";
            finalMsg += compareWords(msg.innerText, totatStr);
            msg.innerText = finalMsg;
        }

        const  compareWords = (str1 , str2) =>{
            let words1 = str1.split(" ");
            let words2 = str2.split(" ");
            let cnt = 0;

            words1.forEach(function (item, index){
                if (item == words2[index]) {
                    cnt++;
                }
            })

            let errorWords = (words1.length - cnt);
            return (cnt + " correct out of " + words1.length + "words amd the total number of error are" + errorWords + ".");

        }

        const wordCounter = (str) =>{
            let response = str.split(" ").length;
            console.log(response);
            return response;
        }

        btn.addEventListener('click', function () {
            if (this.innerText == 'Start') {
                typeWords.disabled = false;
                playGame();
            }else if(this.innerText == "Done"){
                typeWords.disabled = true;
                btn.innerText = "Start";
                endPlay();
            }
        })

    </script>
</body>

</html>